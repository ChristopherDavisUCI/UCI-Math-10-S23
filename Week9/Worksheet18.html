

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Worksheet 18 &#8212; UC Irvine Math 10, Spring 2023</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Week9/Worksheet18';</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Project Instructions" href="../Proj/CourseProject.html" />
    <link rel="prev" title="Worksheet 17" href="Worksheet17.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/digitsyellow.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/digitsyellow.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    UC Irvine, Math 10, Spring 2023
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Exploratory Data Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week1/Week1-Intro.html">Week 1</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week1/Week1-Monday.html">Week 1 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week1/Week1-Wednesday.html">Week 1 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week1/Week1-Friday.html">Week 1 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week1/Worksheet1.html">Worksheet 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week1/Worksheet2.html">Worksheet 2</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week2/Week2-Intro.html">Week 2</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week2/Week2-Monday.html">Week 2 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week2/Week2-Wednesday.html">Week 2 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week2/Week2-Friday.html">Week 2 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week2/Worksheet3.html">Worksheet 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week2/Worksheet4.html">Worksheet 4</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week3/Week3-Intro.html">Week 3</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week3/Week3-Monday.html">Week 3 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week3/Week3-Wednesday.html">Week 3 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week3/Week3-Friday.html">Week 3 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week3/Worksheet5.html">Worksheet 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week3/Worksheet6.html">Worksheet 6</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week4/Week4-Intro.html">Week 4</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Week4-Monday.html">Week 4 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Week4-Tuesday.html">Week 4 Tuesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Week4-Wednesday.html">Week 4 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Week4-Friday.html">Week 4 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Worksheet7.html">Worksheet 7</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Worksheet8.html">Worksheet 8</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Machine Learning</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week5/Week5-Intro.html">Week 5</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Week5-Tuesday.html">Week 5 Tuesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Week5-Wednesday.html">Week 5 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Week5-Thursday.html">Week 5 Thursday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Week5-Friday.html">Week 5 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Worksheet9.html">Worksheet 9</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Worksheet10.html">Worksheet 10</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week6/Week6-Intro.html">Week 6</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week6/Week6-Monday.html">Week 6 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week6/Week6-Wednesday.html">Week 6 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week6/Week6-Friday.html">Week 6 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week6/Worksheet11.html">Worksheet 11</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week6/Worksheet12.html">Worksheet 12</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week7/Week7-Intro.html">Week 7</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week7/Week7-Monday.html">Week 7 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week7/Week7-Wednesday.html">Week 7 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week7/Week7-Friday.html">Week 7 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week7/Worksheet13.html">Worksheet 13</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week7/Worksheet14.html">Worksheet 14</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week8/Week8-Intro.html">Week 8</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week8/Week8-Monday.html">Week 8 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week8/Week8-Wednesday.html">Week 8 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week8/Week8-Friday.html">Week 8 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week8/Worksheet15.html">Worksheet 15</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week8/Worksheet16.html">Worksheet 16</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="Week9-Intro.html">Week 9</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Worksheet17.html">Worksheet 17</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Worksheet 18</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Course Project</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Proj/CourseProject.html">Project Instructions</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Proj/ExtraTopics.html">Possible extra topics</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/ChristopherDavisUCI/UCI-Math-10-S23" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Week9/Worksheet18.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Worksheet 18</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gathering-the-data">Gathering the data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#machine-learning">Machine Learning</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#decision-tree">Decision tree</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#random-forest">Random forest</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#linear-regression">Linear regression</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#submission">Submission</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="worksheet-18">
<h1>Worksheet 18<a class="headerlink" href="#worksheet-18" title="Permalink to this heading">#</a></h1>
<p>Names (3 maximum; use your full names): <strong>BLANK</strong></p>
<p>The main part of this worksheet is based on an example from Jake VanderPlas’s book, <a class="reference external" href="https://jakevdp.github.io/PythonDataScienceHandbook/">Python Data Science Handbook</a>.</p>
<section id="gathering-the-data">
<h2>Gathering the data<a class="headerlink" href="#gathering-the-data" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Go to <a class="reference external" href="https://data.seattle.gov/">https://data.seattle.gov/</a> and find the “Fremont Bridge Bicycle Counter” dataset (<strong>not</strong> the one called “Timeline”, the plain one).  Download the csv file for that dataset (click the “Export” button at the top right), and upload that csv file to this Deepnote project.  Rename the csv file to “Fremont.csv”.  (You can click the three dots to the right of the file name, to reach the option to rename it.  Or just rename it on your computer before you upload the file.)</p></li>
</ul>
<ul class="simple">
<li><p>Read in the Fremont.csv file from Part 0 using pandas.  Use the <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> keyword argument of <code class="docutils literal notranslate"><span class="pre">read_csv</span></code> to tell pandas to convert the values in the “Date” column to dates.  (You will probably need to look up the documentation for <code class="docutils literal notranslate"><span class="pre">read_csv</span></code>.  I originally tried using <code class="docutils literal notranslate"><span class="pre">parse_dates=True</span></code>, but that didn’t work.)</p></li>
<li><p>Drop the rows which contain missing values.</p></li>
<li><p>Keep only the first two columns and name the resulting DataFrame <code class="docutils literal notranslate"><span class="pre">df_pre</span></code>.</p></li>
</ul>
<ul class="simple">
<li><p>Rename the “Fremont Bridge Sidewalks, south of N 34th St” column to “Bikes”, using a command of the form</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>df_pre.rename({???: ???}, axis=???, inplace=???)
</pre></div>
</div>
<ul class="simple">
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">dt</span></code> accessor and two Boolean Series, define a new pandas DataFrame <code class="docutils literal notranslate"><span class="pre">df_pre2</span></code> from <code class="docutils literal notranslate"><span class="pre">df_pre</span></code> which contains only the rows in <code class="docutils literal notranslate"><span class="pre">df_pre</span></code> from the year 2022 and from the hour 8:00am in the morning.  Use <code class="docutils literal notranslate"><span class="pre">.copy()</span></code> to ensure that <code class="docutils literal notranslate"><span class="pre">df_pre2</span></code> is a new DataFrame.</p></li>
<li><p>Round the “Date” column of <code class="docutils literal notranslate"><span class="pre">df_pre2</span></code> to the nearest date (i.e., lose the 8:00am part) by using <code class="docutils literal notranslate"><span class="pre">dt</span></code>, <code class="docutils literal notranslate"><span class="pre">round</span></code> (<a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.Series.dt.round.html">documentation</a>), and the nearest calendar day <a class="reference external" href="https://pandas.pydata.org/docs/user_guide/timeseries.html#timeseries-offset-aliases">offset</a>.</p></li>
</ul>
<p>Check: the resulting DataFrame should have 365 rows and 2 columns.</p>
<p>Comment: At least in my dataset, the rows appear in a strange order, with August appearing at the beginning.  This won’t affect us.</p>
<p>The weather data in the attached <code class="docutils literal notranslate"><span class="pre">SeattleWeather.csv</span></code> file was downloaded from <a class="reference external" href="https://www.ncdc.noaa.gov/cdo-web/search?datasetid=GHCND">this website</a>.  (You don’t need to re-download it; just use the provided csv file in this Deepnote project.)  You can find definitions for the columns in this csv file in the attached <code class="docutils literal notranslate"><span class="pre">WeatherDoc.pdf</span></code> file.</p>
<ul class="simple">
<li><p>Read in the contents of the SeattleWeather.csv file, again use <code class="docutils literal notranslate"><span class="pre">parse_dates</span></code> to convert the “DATE” column to a datetime data type, and name the resulting DataFrame <code class="docutils literal notranslate"><span class="pre">df_weather</span></code>.</p></li>
</ul>
<ul class="simple">
<li><p>Use the pandas DataFrame method <code class="docutils literal notranslate"><span class="pre">merge</span></code> (<a class="reference external" href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.merge.html">documentation</a>) with <code class="docutils literal notranslate"><span class="pre">how=&quot;inner&quot;</span></code> to merge together <code class="docutils literal notranslate"><span class="pre">df_pre2</span></code> and <code class="docutils literal notranslate"><span class="pre">df_weather</span></code> on their columns containing dates.  Use the keyword arguments <code class="docutils literal notranslate"><span class="pre">left_on</span></code> and <code class="docutils literal notranslate"><span class="pre">right_on</span></code> because the date columns are spelled differently in these two datasets.  Name the resulting DataFrame <code class="docutils literal notranslate"><span class="pre">df</span></code>.</p></li>
</ul>
<ul class="simple">
<li><p>Using list comprehension, make a list <code class="docutils literal notranslate"><span class="pre">wt_list</span></code> of all the column names in <code class="docutils literal notranslate"><span class="pre">df</span></code> which begin with the letters <code class="docutils literal notranslate"><span class="pre">&quot;WT&quot;</span></code>.</p></li>
</ul>
<ul class="simple">
<li><p>Add a column “IsWeekend” which contains <code class="docutils literal notranslate"><span class="pre">True</span></code> if the date is “Saturday” or “Sunday” and is <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.  (Hint.  Use <code class="docutils literal notranslate"><span class="pre">dt</span></code> and the <code class="docutils literal notranslate"><span class="pre">day_name</span></code> method, together with <code class="docutils literal notranslate"><span class="pre">isin</span></code>.)</p></li>
</ul>
<ul class="simple">
<li><p>Add a column “Month” which contains the numeric month value.</p></li>
</ul>
<ul class="simple">
<li><p>Using <code class="docutils literal notranslate"><span class="pre">df[wt_list]</span> <span class="pre">=</span> <span class="pre">df[wt_list]...</span></code> and the <code class="docutils literal notranslate"><span class="pre">fillna</span></code> method, replace all the missing values in these columns with <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p></li>
<li><p>Remove the “PGTM” column from <code class="docutils literal notranslate"><span class="pre">df</span></code>, by using the <code class="docutils literal notranslate"><span class="pre">drop</span></code> method.</p></li>
<li><p>Drop the rows with missing values.</p></li>
</ul>
<p>Check: the resulting DataFrame should have 364 rows and 25 columns.</p>
</section>
<section id="machine-learning">
<h2>Machine Learning<a class="headerlink" href="#machine-learning" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Define a list <code class="docutils literal notranslate"><span class="pre">features</span></code> containing all the numeric columns from <code class="docutils literal notranslate"><span class="pre">df</span></code> except the “Bikes” column.  Use <code class="docutils literal notranslate"><span class="pre">is_numeric_dtype</span></code> from <code class="docutils literal notranslate"><span class="pre">pandas.api.types</span></code>.</p></li>
</ul>
<section id="decision-tree">
<h3>Decision tree<a class="headerlink" href="#decision-tree" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Fit a Decision Tree regressor <code class="docutils literal notranslate"><span class="pre">reg</span></code> with a maximum of <code class="docutils literal notranslate"><span class="pre">6</span></code> leaf nodes to the data, using the columns in <code class="docutils literal notranslate"><span class="pre">features</span></code> as the input variables and using the “Bikes” column as the target.</p></li>
</ul>
<ul class="simple">
<li><p>Visualize this decision tree using the following code.  (Feel free to change the <code class="docutils literal notranslate"><span class="pre">figsize</span></code> part if it helps.)</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">plot_tree</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plot_tree</span><span class="p">(</span><span class="n">reg</span><span class="p">,</span> <span class="n">feature_names</span><span class="o">=</span><span class="n">reg</span><span class="o">.</span><span class="n">feature_names_in_</span><span class="p">,</span> <span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Using the above tree diagram, answer the following in a markdown cell.</p>
<ul class="simple">
<li><p>List all the columns which are referenced in this decision tree.</p></li>
<li><p>Imagine a 55 degree Tuesday in August.  What value would be predicted by our decision tree?</p></li>
<li><p>What about a 60 degree Tuesday in August?</p></li>
</ul>
<ul class="simple">
<li><p>Check the reported feature importances using the following code.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">reg</span><span class="o">.</span><span class="n">feature_importances_</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">reg</span><span class="o">.</span><span class="n">feature_names_in_</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Add a column “DT_Pred” (for “Decision Tree Prediction”) to <code class="docutils literal notranslate"><span class="pre">df</span></code> corresponding to the predicted values from <code class="docutils literal notranslate"><span class="pre">reg</span></code> for each row in <code class="docutils literal notranslate"><span class="pre">df</span></code>.</p></li>
</ul>
<ul class="simple">
<li><p>Plot the data together (in red) with the true data (in black) using the following code.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">c1</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;Bikes&quot;</span>
<span class="p">)</span><span class="o">.</span><span class="n">properties</span><span class="p">(</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">1000</span>
<span class="p">)</span>

<span class="n">c2</span> <span class="o">=</span> <span class="n">alt</span><span class="o">.</span><span class="n">Chart</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">mark_line</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;DT_Pred&quot;</span>
<span class="p">)</span>

<span class="n">c1</span><span class="o">+</span><span class="n">c2</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Recall that we required our decision tree regressor to have at most 6 leaf nodes.  How is that number 6 reflected in the above chart?</p></li>
</ul>
</section>
<section id="random-forest">
<h3>Random forest<a class="headerlink" href="#random-forest" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Fit a Random Forest regressor <code class="docutils literal notranslate"><span class="pre">rfr</span></code> to the data, using 200 estimators, each with a maximum of <code class="docutils literal notranslate"><span class="pre">6</span></code> leaf nodes.</p></li>
</ul>
<ul class="simple">
<li><p>Check the reported feature importances, by adapting the code from the Decision Tree portion.</p></li>
</ul>
<ul class="simple">
<li><p>What do you think is the most noteworthy difference between these values and the values we found above for a single decision tree?</p></li>
</ul>
<ul class="simple">
<li><p>Add a column “RF_Pred” to <code class="docutils literal notranslate"><span class="pre">df</span></code> containing the predicted values from <code class="docutils literal notranslate"><span class="pre">rfr</span></code>.</p></li>
</ul>
<ul class="simple">
<li><p>Make an Altair chart as above, but using the “RF_Pred” column instead of the “DT_Pred” column.</p></li>
</ul>
<ul class="simple">
<li><p>What do you think is the most extreme difference between this chart and the above chart made using the decision tree?</p></li>
</ul>
</section>
<section id="linear-regression">
<h3>Linear regression<a class="headerlink" href="#linear-regression" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Fit a <code class="docutils literal notranslate"><span class="pre">LinearRegression</span></code> object <code class="docutils literal notranslate"><span class="pre">lin</span></code> to the data.</p></li>
</ul>
<ul class="simple">
<li><p>We don’t have a <code class="docutils literal notranslate"><span class="pre">feature_importances_</span></code> attribute for a <code class="docutils literal notranslate"><span class="pre">LinearRegression</span></code> object, but we can at least check the signs of the coefficients.  (The relative sizes of the numbers I think are not that meaningful.  To meaninfully compare the sizes of the coefficients, we should first rescale the data.)</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">lin</span><span class="o">.</span><span class="n">coef_</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">lin</span><span class="o">.</span><span class="n">feature_names_in_</span><span class="p">)</span>
</pre></div>
</div>
<p>Answer the following questions in a markdown cell.</p>
<ul class="simple">
<li><p>What is the sign of the “PRCP” coefficient?  Does it make sense?  Why?</p></li>
<li><p>What is the sign of the “TMAX” coefficient?  Does it make sense?  Why?</p></li>
<li><p>Does the sign of the “IsWeekend” coefficient suggest people are biking more often to go to work/school, or for recreation?  Briefly explain.</p></li>
</ul>
<ul class="simple">
<li><p>Add a column “Lin_Pred” to <code class="docutils literal notranslate"><span class="pre">df</span></code> containing the predicted values from <code class="docutils literal notranslate"><span class="pre">lin</span></code>.</p></li>
</ul>
<ul class="simple">
<li><p>Make an Altair chart as above, but using the “Lin_Pred” column for the predictions</p></li>
</ul>
<ul class="simple">
<li><p>Why does the above linear regression function look so different from a straight line?  The graph certainly doesn’t look “linear”.  How is that possible?  Explain in a markdown cell.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="n">Imagine</span> <span class="n">we</span> <span class="n">have</span> <span class="n">some</span> <span class="n">Machine</span> <span class="n">Learning</span> <span class="n">model</span> <span class="p">(</span><span class="ow">not</span> <span class="n">linear</span> <span class="n">regression</span><span class="p">,</span> <span class="n">just</span> <span class="n">some</span> <span class="n">model</span><span class="p">)</span> <span class="n">whose</span> <span class="n">predictions</span> <span class="n">exactly</span> <span class="n">match</span> <span class="n">the</span> <span class="n">true</span> <span class="n">bike</span> <span class="n">data</span><span class="o">.</span>  <span class="n">Why</span> <span class="ow">is</span> <span class="n">that</span> <span class="n">more</span> <span class="n">likely</span> <span class="n">to</span> <span class="n">be</span> <span class="n">a</span> <span class="n">bad</span> <span class="n">sign</span> <span class="n">than</span> <span class="n">a</span> <span class="n">good</span> sign<span class="o">?</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="submission">
<h2>Submission<a class="headerlink" href="#submission" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Reminder: everyone needs to make a submission on Canvas.</p></li>
<li><p>Reminder: include everyone’s full name at the top, after <strong>Names</strong>.</p></li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">Share</span></code> button at the top right, enable public sharing, and enable Comment privileges. Then submit the created link on Canvas.</p></li>
</ul>
<a style='text-decoration:none;line-height:16px;display:flex;color:#5B5B62;padding:10px;justify-content:end;' href='https://deepnote.com?utm_source=created-in-deepnote-cell&projectId=ec757e78-98b0-4a18-b858-a41850e652e0' target="_blank">
<img alt='Created in deepnote.com' style='display:inline;max-height:16px;margin:0px;margin-right:7.5px;' src='data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iODBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgODAgODAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU0LjEgKDc2NDkwKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5Hcm91cCAzPC90aXRsZT4KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPgogICAgPGcgaWQ9IkxhbmRpbmciIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGlkPSJBcnRib2FyZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyMzUuMDAwMDAwLCAtNzkuMDAwMDAwKSI+CiAgICAgICAgICAgIDxnIGlkPSJHcm91cC0zIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjM1LjAwMDAwMCwgNzkuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iUGF0aC0yMCIgZmlsbD0iIzAyNjVCNCIgcG9pbnRzPSIyLjM3NjIzNzYyIDgwIDM4LjA0NzY2NjcgODAgNTcuODIxNzgyMiA3My44MDU3NTkyIDU3LjgyMTc4MjIgMzIuNzU5MjczOSAzOS4xNDAyMjc4IDMxLjY4MzE2ODMiPjwvcG9seWdvbj4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zNS4wMDc3MTgsODAgQzQyLjkwNjIwMDcsNzYuNDU0OTM1OCA0Ny41NjQ5MTY3LDcxLjU0MjI2NzEgNDguOTgzODY2LDY1LjI2MTk5MzkgQzUxLjExMjI4OTksNTUuODQxNTg0MiA0MS42NzcxNzk1LDQ5LjIxMjIyODQgMjUuNjIzOTg0Niw0OS4yMTIyMjg0IEMyNS40ODQ5Mjg5LDQ5LjEyNjg0NDggMjkuODI2MTI5Niw0My4yODM4MjQ4IDM4LjY0NzU4NjksMzEuNjgzMTY4MyBMNzIuODcxMjg3MSwzMi41NTQ0MjUgTDY1LjI4MDk3Myw2Ny42NzYzNDIxIEw1MS4xMTIyODk5LDc3LjM3NjE0NCBMMzUuMDA3NzE4LDgwIFoiIGlkPSJQYXRoLTIyIiBmaWxsPSIjMDAyODY4Ij48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMCwzNy43MzA0NDA1IEwyNy4xMTQ1MzcsMC4yNTcxMTE0MzYgQzYyLjM3MTUxMjMsLTEuOTkwNzE3MDEgODAsMTAuNTAwMzkyNyA4MCwzNy43MzA0NDA1IEM4MCw2NC45NjA0ODgyIDY0Ljc3NjUwMzgsNzkuMDUwMzQxNCAzNC4zMjk1MTEzLDgwIEM0Ny4wNTUzNDg5LDc3LjU2NzA4MDggNTMuNDE4MjY3Nyw3MC4zMTM2MTAzIDUzLjQxODI2NzcsNTguMjM5NTg4NSBDNTMuNDE4MjY3Nyw0MC4xMjg1NTU3IDM2LjMwMzk1NDQsMzcuNzMwNDQwNSAyNS4yMjc0MTcsMzcuNzMwNDQwNSBDMTcuODQzMDU4NiwzNy43MzA0NDA1IDkuNDMzOTE5NjYsMzcuNzMwNDQwNSAwLDM3LjczMDQ0MDUgWiIgaWQ9IlBhdGgtMTkiIGZpbGw9IiMzNzkzRUYiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+' > </img>
Created in <span style='font-weight:600;margin-left:4px;'>Deepnote</span></a></section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Week9"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="Worksheet17.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Worksheet 17</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../Proj/CourseProject.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Project Instructions</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gathering-the-data">Gathering the data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#machine-learning">Machine Learning</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#decision-tree">Decision tree</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#random-forest">Random forest</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#linear-regression">Linear regression</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#submission">Submission</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Christopher Davis
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>