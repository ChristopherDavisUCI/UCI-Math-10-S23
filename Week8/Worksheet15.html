

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Worksheet 15 &#8212; UC Irvine Math 10, Spring 2023</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Week8/Worksheet15';</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Worksheet 16" href="Worksheet16.html" />
    <link rel="prev" title="Week 8 Friday" href="Week8-Friday.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/digitsyellow.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/digitsyellow.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    UC Irvine, Math 10, Spring 2023
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Exploratory Data Analysis</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week1/Week1-Intro.html">Week 1</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week1/Week1-Monday.html">Week 1 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week1/Week1-Wednesday.html">Week 1 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week1/Week1-Friday.html">Week 1 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week1/Worksheet1.html">Worksheet 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week1/Worksheet2.html">Worksheet 2</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week2/Week2-Intro.html">Week 2</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week2/Week2-Monday.html">Week 2 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week2/Week2-Wednesday.html">Week 2 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week2/Week2-Friday.html">Week 2 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week2/Worksheet3.html">Worksheet 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week2/Worksheet4.html">Worksheet 4</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week3/Week3-Intro.html">Week 3</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week3/Week3-Monday.html">Week 3 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week3/Week3-Wednesday.html">Week 3 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week3/Week3-Friday.html">Week 3 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week3/Worksheet5.html">Worksheet 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week3/Worksheet6.html">Worksheet 6</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week4/Week4-Intro.html">Week 4</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Week4-Monday.html">Week 4 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Week4-Tuesday.html">Week 4 Tuesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Week4-Wednesday.html">Week 4 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Week4-Friday.html">Week 4 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Worksheet7.html">Worksheet 7</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Worksheet8.html">Worksheet 8</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Machine Learning</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week5/Week5-Intro.html">Week 5</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Week5-Tuesday.html">Week 5 Tuesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Week5-Wednesday.html">Week 5 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Week5-Thursday.html">Week 5 Thursday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Week5-Friday.html">Week 5 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Worksheet9.html">Worksheet 9</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Worksheet10.html">Worksheet 10</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week6/Week6-Intro.html">Week 6</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week6/Week6-Monday.html">Week 6 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week6/Week6-Wednesday.html">Week 6 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week6/Week6-Friday.html">Week 6 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week6/Worksheet11.html">Worksheet 11</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week6/Worksheet12.html">Worksheet 12</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week7/Week7-Intro.html">Week 7</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week7/Week7-Monday.html">Week 7 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week7/Week7-Wednesday.html">Week 7 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week7/Week7-Friday.html">Week 7 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week7/Worksheet13.html">Worksheet 13</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week7/Worksheet14.html">Worksheet 14</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="Week8-Intro.html">Week 8</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Week8-Monday.html">Week 8 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week8-Wednesday.html">Week 8 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week8-Friday.html">Week 8 Friday</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Worksheet 15</a></li>
<li class="toctree-l2"><a class="reference internal" href="Worksheet16.html">Worksheet 16</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week9/Week9-Intro.html">Week 9</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week9/Week9-Wednesday.html">Week 9 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week9/Worksheet17.html">Worksheet 17</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week9/Worksheet18.html">Worksheet 18</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week10/Week10-Intro.html">Week 10</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-10"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week10/Week10-Monday.html">Week 10 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week10/Week10-Wednesday.html">Week 10 Wednesday</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Course Project</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Proj/CourseProject.html">Project Instructions</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-11"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Proj/ExtraTopics.html">Possible extra topics</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/ChristopherDavisUCI/UCI-Math-10-S23" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Week8/Worksheet15.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Worksheet 15</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#feature-engineering">Feature Engineering</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#splitting-the-data-with-train-test-split">Splitting the data with <code class="docutils literal notranslate"><span class="pre">train_test_split</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#predicting-survival-using-a-decision-tree">Predicting survival using a decision tree</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#illustrating-the-decision-tree">Illustrating the decision tree</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-u-shaped-test-error-curve">The U-shaped test error curve</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reminder">Reminder</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#submission">Submission</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="worksheet-15">
<h1>Worksheet 15<a class="headerlink" href="#worksheet-15" title="Permalink to this heading">#</a></h1>
<p>Due Tuesday night (instead of the usual Monday due date), because of the Memorial Day holiday.</p>
<p>The goal of this worksheet is to use a Decision Tree classifier to predict whether or not a passenger of the Titanic survived.</p>
<p>Many of the ideas in this worksheet come from <a class="reference external" href="https://www.kaggle.com/code/zlatankr/titanic-random-forest-82-78">this notebook</a> on Kaggle by <a class="reference external" href="https://www.kaggle.com/zlatankr">ZlatanKremonic</a>.  The dataset we use comes from a <a class="reference external" href="https://www.kaggle.com/competitions/titanic">Kaggle competition</a>.</p>
<section id="feature-engineering">
<h2>Feature Engineering<a class="headerlink" href="#feature-engineering" title="Permalink to this heading">#</a></h2>
<p>A few useful columns in this DataFrame are not directly useable as they are, for example because they include missing values or because they are non-numeric.  By “Feature Engineering”, we mean adding new columns (or adjusting existing columns) that can be used by our Machine Learning model.</p>
<ul class="simple">
<li><p>Load the attached Titanic dataset.</p></li>
<li><p>Using Boolean indexing, remove the rows where the “Embarked” column value is missing.</p></li>
<li><p>Drop the “PassengerId” column using the <code class="docutils literal notranslate"><span class="pre">drop</span></code> method, with <code class="docutils literal notranslate"><span class="pre">drop(&quot;PassengerId&quot;,</span> <span class="pre">axis=???)</span></code>.  You should probably use the <code class="docutils literal notranslate"><span class="pre">copy</span></code> method to prevent warnings in the next step.</p></li>
<li><p>Check: at this stage, the DataFrame should have <code class="docutils literal notranslate"><span class="pre">889</span></code> rows and <code class="docutils literal notranslate"><span class="pre">11</span></code> columns.</p></li>
</ul>
<ul class="simple">
<li><p>Add a column “AgeNull” which contains <code class="docutils literal notranslate"><span class="pre">True</span></code> if the value in the “Age” column is missing and contains <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.  The code to do this is shorter than you might expect: <code class="docutils literal notranslate"><span class="pre">df[&quot;AgeNull&quot;]</span> <span class="pre">=</span> <span class="pre">df[&quot;Age&quot;].isna()</span></code>.</p></li>
</ul>
<ul class="simple">
<li><p>Fill in the missing values in the “Age” column with the median value from that column. Use the pandas Series method <code class="docutils literal notranslate"><span class="pre">fillna</span></code>.  (Replace the “Age” column with this new column that does not have any missing values.)</p></li>
</ul>
<ul class="simple">
<li><p>Add a column “IsFemale” which contains <code class="docutils literal notranslate"><span class="pre">True</span></code> if the value in the “Sex” column is <code class="docutils literal notranslate"><span class="pre">&quot;female&quot;</span></code>.  (As with the “AgeNull” column above, you shouldn’t need to use <code class="docutils literal notranslate"><span class="pre">map</span></code> or a for loop or anything like that.)</p></li>
</ul>
</section>
<section id="splitting-the-data-with-train-test-split">
<h2>Splitting the data with <code class="docutils literal notranslate"><span class="pre">train_test_split</span></code><a class="headerlink" href="#splitting-the-data-with-train-test-split" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Make a list <code class="docutils literal notranslate"><span class="pre">features</span></code> containing the names of all the numeric columns in the DataFrame except for the “Survived” column.  (Use the function <code class="docutils literal notranslate"><span class="pre">is_numeric_dtype</span></code> from <code class="docutils literal notranslate"><span class="pre">pandas.api.types</span></code>.  To take the “Survived” column out of the list, you might want to use the Python list method <code class="docutils literal notranslate"><span class="pre">remove</span></code>.  Notice that <code class="docutils literal notranslate"><span class="pre">remove</span></code> changes this list <em>in place</em>.)</p></li>
</ul>
<ul class="simple">
<li><p>Check: there should be 7 column names in the <code class="docutils literal notranslate"><span class="pre">features</span></code> list.</p></li>
</ul>
<ul class="simple">
<li><p>Divide the data into a training set and a test set using <code class="docutils literal notranslate"><span class="pre">train_test_split</span></code>.  Use the columns named in <code class="docutils literal notranslate"><span class="pre">features</span></code> for the input features.  For the target, use the “Survived” column.  For the size, use <code class="docutils literal notranslate"><span class="pre">train_size</span></code> to specify that we should use 60% of the rows for the training set.  Name the resulting objects <code class="docutils literal notranslate"><span class="pre">X_train,</span> <span class="pre">X_test,</span> <span class="pre">y_train,</span> <span class="pre">y_test</span></code>.</p></li>
</ul>
</section>
<section id="predicting-survival-using-a-decision-tree">
<h2>Predicting survival using a decision tree<a class="headerlink" href="#predicting-survival-using-a-decision-tree" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Instantiate a <code class="docutils literal notranslate"><span class="pre">DecisionTreeClassifier</span></code> object <code class="docutils literal notranslate"><span class="pre">clf</span></code>.  Include restrictions on the complexity of the tree using the keyword arguments <code class="docutils literal notranslate"><span class="pre">max_leaf_nodes</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max_depth</span></code> when you instantiate the classifier.</p></li>
<li><p>Fit the classifier using <code class="docutils literal notranslate"><span class="pre">X_train</span></code> and <code class="docutils literal notranslate"><span class="pre">y_train</span></code>.</p></li>
<li><p>Try to experiment with different values of <code class="docutils literal notranslate"><span class="pre">max_leaf_nodes</span></code> and/or <code class="docutils literal notranslate"><span class="pre">max_depth</span></code> until you have a tree which seems to be performing well (say, over 80% accuracy on the test set, as calculated using <code class="docutils literal notranslate"><span class="pre">clf.score</span></code>) and which does not seem to be drastically overfitting the data (say, the accuracy on the training set should be within 5% of the accuracy on the test set).</p></li>
</ul>
<p><strong>Warning</strong>.  Be sure you are never calling the <code class="docutils literal notranslate"><span class="pre">fit</span></code> method with the test set; you should only use the <code class="docutils literal notranslate"><span class="pre">predict</span></code> method or the <code class="docutils literal notranslate"><span class="pre">score</span></code> method with the test set.</p>
</section>
<section id="illustrating-the-decision-tree">
<h2>Illustrating the decision tree<a class="headerlink" href="#illustrating-the-decision-tree" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Use the following code to visualize how your decision tree is working.  (I don’t totally understand how the <code class="docutils literal notranslate"><span class="pre">figsize=(20,10)</span></code> code works… feel free to adjust it if other values work better for your particular tree.)</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">plot_tree</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plot_tree</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">feature_names</span><span class="o">=</span><span class="n">clf</span><span class="o">.</span><span class="n">feature_names_in_</span><span class="p">,</span> <span class="n">filled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="the-u-shaped-test-error-curve">
<h2>The U-shaped test error curve<a class="headerlink" href="#the-u-shaped-test-error-curve" title="Permalink to this heading">#</a></h2>
<p>Our last goal in this worksheet is to reproduce a curve like the following, taken from a <a class="reference external" href="https://twitter.com/daniela_witten/status/1292293102103748609?s=20">Twitter post</a> by Daniela Witten.  The flexibility axis will correspond to the number of tree leaves.  To make this chart using Altair, we will use a DataFrame with rows for training errors and with additional rows for test errors.</p>
<p><img alt="Test error curve" src="../_images/u-shape-dw.jpeg" /></p>
<ul class="simple">
<li><p>Make an empty pandas DataFrame <code class="docutils literal notranslate"><span class="pre">df_err</span></code> with three columns named <code class="docutils literal notranslate"><span class="pre">leaves</span></code>, <code class="docutils literal notranslate"><span class="pre">error</span></code> and <code class="docutils literal notranslate"><span class="pre">set</span></code>.</p></li>
</ul>
<p>For each integer value <code class="docutils literal notranslate"><span class="pre">i</span></code> from <code class="docutils literal notranslate"><span class="pre">2</span></code> to <code class="docutils literal notranslate"><span class="pre">40</span></code>, inclusive, do the following.  (Use a for loop.  Our overall goal is to have a row for training error and another row for test error.)</p>
<ul class="simple">
<li><p>Fit a <code class="docutils literal notranslate"><span class="pre">DecisionTreeClassifier</span></code> with <code class="docutils literal notranslate"><span class="pre">max_leaf_nodes=i</span></code> to the training data.  (Don’t put a restriction on the depth of the decision tree.)</p></li>
<li><p>Add a new row to <code class="docutils literal notranslate"><span class="pre">df_err</span></code> containing <code class="docutils literal notranslate"><span class="pre">i</span></code> for the value in the “leaves” column, containing the string <code class="docutils literal notranslate"><span class="pre">&quot;train&quot;</span></code> for the value in the “set” column, and containing the error rate for the value in the “error” column.  (For example, if the <code class="docutils literal notranslate"><span class="pre">score</span></code> on the training data is <code class="docutils literal notranslate"><span class="pre">0.82</span></code>, then you would put <code class="docutils literal notranslate"><span class="pre">0.18</span></code> for the “error” value.)  Suggestion: add this new row by executing <code class="docutils literal notranslate"><span class="pre">df_err.loc[len(df_err)]</span> <span class="pre">=</span> <span class="pre">d</span></code>, where <code class="docutils literal notranslate"><span class="pre">d</span></code> is an appropriate Python dictionary.</p></li>
<li><p>Again do the same thing, this time using the error rate on the test set, and using the string <code class="docutils literal notranslate"><span class="pre">&quot;test&quot;</span></code> for the “set” column.</p></li>
</ul>
<p><strong>Warning</strong>.  Be sure you are never fitting a classifier on the test set.</p>
<ul class="simple">
<li><p>Make an Altair line chart <code class="docutils literal notranslate"><span class="pre">c</span></code> using “leaves” for the x-axis, using “error” for the y-axis, and using “set” for the color.  (The result should look approximately like the image above.  The image above is an idealized version of how we would expect the training error and test error curves to look.  Most “real-world” error curves, including yours, will display more randomness and less regularity than the image above.)</p></li>
</ul>
<ul class="simple">
<li><p>Can you recognize the approximate “U-shape” in the test error curve?</p></li>
</ul>
<ul class="simple">
<li><p>What would you estimate is the “sweet spot” for the ideal level of flexibility for this data?  How does it compare to what you chose in the “Predicting survival” section above?</p></li>
</ul>
</section>
<section id="reminder">
<h2>Reminder<a class="headerlink" href="#reminder" title="Permalink to this heading">#</a></h2>
<p>Every group member needs to submit this on Canvas (even if you all submit the same file).</p>
</section>
<section id="submission">
<h2>Submission<a class="headerlink" href="#submission" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Save the resulting Altair chart as a png file (click the three dots at the upper right of the Altair chart) and submit that png file on Canvas.</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Week8"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="Week8-Friday.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Week 8 Friday</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="Worksheet16.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Worksheet 16</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#feature-engineering">Feature Engineering</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#splitting-the-data-with-train-test-split">Splitting the data with <code class="docutils literal notranslate"><span class="pre">train_test_split</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#predicting-survival-using-a-decision-tree">Predicting survival using a decision tree</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#illustrating-the-decision-tree">Illustrating the decision tree</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-u-shaped-test-error-curve">The U-shaped test error curve</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reminder">Reminder</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#submission">Submission</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Christopher Davis
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>