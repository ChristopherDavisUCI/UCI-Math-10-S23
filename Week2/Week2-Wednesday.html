

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Week 2 Wednesday &#8212; UC Irvine Math 10, Spring 2023</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=12da95d707ffb74b382d" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=12da95d707ffb74b382d" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Week2/Week2-Wednesday';</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Week 2 Friday" href="Week2-Friday.html" />
    <link rel="prev" title="Week 2 Monday" href="Week2-Monday.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/digitsyellow.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/digitsyellow.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    UC Irvine, Math 10, Spring 2023
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Exploratory Data Analysis</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week1/Week1-Intro.html">Week 1</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week1/Week1-Monday.html">Week 1 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week1/Week1-Wednesday.html">Week 1 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week1/Week1-Friday.html">Week 1 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week1/Worksheet1.html">Worksheet 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week1/Worksheet2.html">Worksheet 2</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="Week2-Intro.html">Week 2</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Week2-Monday.html">Week 2 Monday</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Week 2 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="Week2-Friday.html">Week 2 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="Worksheet3.html">Worksheet 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="Worksheet4.html">Worksheet 4</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week3/Week3-Intro.html">Week 3</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week3/Week3-Monday.html">Week 3 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week3/Week3-Wednesday.html">Week 3 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week3/Week3-Friday.html">Week 3 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week3/Worksheet5.html">Worksheet 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week3/Worksheet6.html">Worksheet 6</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week4/Week4-Intro.html">Week 4</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Week4-Monday.html">Week 4 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Week4-Tuesday.html">Week 4 Tuesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Week4-Wednesday.html">Week 4 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Week4-Friday.html">Week 4 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Worksheet7.html">Worksheet 7</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week4/Worksheet8.html">Worksheet 8</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Machine Learning</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week5/Week5-Intro.html">Week 5</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Week5-Tuesday.html">Week 5 Tuesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Week5-Wednesday.html">Week 5 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Week5-Thursday.html">Week 5 Thursday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Week5-Friday.html">Week 5 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Worksheet9.html">Worksheet 9</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week5/Worksheet10.html">Worksheet 10</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week6/Week6-Intro.html">Week 6</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week6/Week6-Monday.html">Week 6 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week6/Week6-Wednesday.html">Week 6 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week6/Week6-Friday.html">Week 6 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week6/Worksheet11.html">Worksheet 11</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week6/Worksheet12.html">Worksheet 12</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week7/Week7-Intro.html">Week 7</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week7/Week7-Monday.html">Week 7 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week7/Week7-Wednesday.html">Week 7 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week7/Week7-Friday.html">Week 7 Friday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week7/Worksheet13.html">Worksheet 13</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week7/Worksheet14.html">Worksheet 14</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Week8/Week8-Intro.html">Week 8</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Week8/Week8-Monday.html">Week 8 Monday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week8/Week8-Wednesday.html">Week 8 Wednesday</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week8/Worksheet15.html">Worksheet 15</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Week8/Worksheet16.html">Worksheet 16</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Course Project</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Proj/CourseProject.html">Project Instructions</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../Proj/ExtraTopics.html">Possible extra topics</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/ChristopherDavisUCI/UCI-Math-10-S23" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Week2/Week2-Wednesday.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Week 2 Wednesday</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#announcements">Announcements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploring-the-taxis-dataset">Exploring the taxis dataset</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-dates-in-pandas">Working with dates in pandas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-strings-in-pandas">Working with strings in pandas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#missing-values-in-pandas">Missing values in pandas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#time-to-work-on-worksheets-3-4">Time to work on Worksheets 3-4</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="week-2-wednesday">
<h1>Week 2 Wednesday<a class="headerlink" href="#week-2-wednesday" title="Permalink to this heading">#</a></h1>
<section id="announcements">
<h2>Announcements<a class="headerlink" href="#announcements" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Trying something new: I’m in Deepnote, but in a “Private” project.  Will upload this afterwards.  You can find the blank version in the Week 2 folder.</p></li>
<li><p>Worksheet 4 handed out today.  Both Worksheets 3 and 4 due Monday.</p></li>
<li><p>Hanson (one of our three Learning Assistants) is here to help.</p></li>
</ul>
</section>
<section id="exploring-the-taxis-dataset">
<h2>Exploring the taxis dataset<a class="headerlink" href="#exploring-the-taxis-dataset" title="Permalink to this heading">#</a></h2>
<p>I refer to the first half of Math 10 as the “Exploratory Data Analysis” half (EDA).  In the first part today, I want to go through some basic tools in pandas for getting a quick overview of the contents of a pandas DataFrame.</p>
<p>Comment: this <em>taxis</em> dataset is included with the Python library Seaborn.  Usually that’s where I get it from.  In this case, I’m getting it from a csv file instead, because Seaborn automatically converts some dates for us, but I want us to see how to make that conversion explicitly.</p>
<ul class="simple">
<li><p>Load the attached file <code class="docutils literal notranslate"><span class="pre">taxis.csv</span></code> using the pandas function <code class="docutils literal notranslate"><span class="pre">read_csv</span></code>.  Store the resulting DataFrame in the variable <code class="docutils literal notranslate"><span class="pre">df</span></code>.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;../data/taxis.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Get a sense for the contents of <code class="docutils literal notranslate"><span class="pre">df</span></code> using the following.</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">shape</span></code> attribute.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">head</span></code> method, to view the first few rows.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">sample</span></code> method, to view a random collection of rows.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">info</span></code> method.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">describe</span></code> method.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">shape</span></code> attribute reports the number of rows (6433 in this case) and the number of columns (14).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(6433, 14)
</pre></div>
</div>
</div>
</div>
<p>Here we actually look at the contents of <code class="docutils literal notranslate"><span class="pre">df</span></code>, namely, we look at its first 3 rows.</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pickup</th>
      <th>dropoff</th>
      <th>passengers</th>
      <th>distance</th>
      <th>fare</th>
      <th>tip</th>
      <th>tolls</th>
      <th>total</th>
      <th>color</th>
      <th>payment</th>
      <th>pickup_zone</th>
      <th>dropoff_zone</th>
      <th>pickup_borough</th>
      <th>dropoff_borough</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019-03-23 20:21:09</td>
      <td>2019-03-23 20:27:24</td>
      <td>1</td>
      <td>1.60</td>
      <td>7.0</td>
      <td>2.15</td>
      <td>0.0</td>
      <td>12.95</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>Lenox Hill West</td>
      <td>UN/Turtle Bay South</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2019-03-04 16:11:55</td>
      <td>2019-03-04 16:19:00</td>
      <td>1</td>
      <td>0.79</td>
      <td>5.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>9.30</td>
      <td>yellow</td>
      <td>cash</td>
      <td>Upper West Side South</td>
      <td>Upper West Side South</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2019-03-27 17:53:01</td>
      <td>2019-03-27 18:00:25</td>
      <td>1</td>
      <td>1.37</td>
      <td>7.5</td>
      <td>2.36</td>
      <td>0.0</td>
      <td>14.16</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>Alphabet City</td>
      <td>West Village</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">sample</span></code> method is similar, but it returns a random selection of the rows.  Notice that they could also be in a different order.</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pickup</th>
      <th>dropoff</th>
      <th>passengers</th>
      <th>distance</th>
      <th>fare</th>
      <th>tip</th>
      <th>tolls</th>
      <th>total</th>
      <th>color</th>
      <th>payment</th>
      <th>pickup_zone</th>
      <th>dropoff_zone</th>
      <th>pickup_borough</th>
      <th>dropoff_borough</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>794</th>
      <td>2019-03-06 10:01:53</td>
      <td>2019-03-06 10:27:29</td>
      <td>2</td>
      <td>2.15</td>
      <td>16.0</td>
      <td>3.86</td>
      <td>0.0</td>
      <td>23.16</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>Upper East Side South</td>
      <td>Clinton East</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
    </tr>
    <tr>
      <th>6352</th>
      <td>2019-03-28 12:46:54</td>
      <td>2019-03-28 12:51:24</td>
      <td>1</td>
      <td>0.55</td>
      <td>5.0</td>
      <td>0.58</td>
      <td>0.0</td>
      <td>6.38</td>
      <td>green</td>
      <td>credit card</td>
      <td>Morningside Heights</td>
      <td>Morningside Heights</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
    </tr>
    <tr>
      <th>3412</th>
      <td>2019-03-07 09:37:32</td>
      <td>2019-03-07 10:03:00</td>
      <td>1</td>
      <td>1.61</td>
      <td>15.5</td>
      <td>3.76</td>
      <td>0.0</td>
      <td>22.56</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>Upper East Side South</td>
      <td>Midtown South</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">info</span></code> method contains lots of iinformation.  At the very bottom, it tells us how much space the DataFrame is taking up (which can be very useful if you’ve loaded a huge DataFrame from some external source).  For each row, it tells us the data type (in the usual rough sense, for example, strings are reported as the “object” data type).</p>
<p>A huge issue in data science is missing data (and how to deal with it).  This <code class="docutils literal notranslate"><span class="pre">info</span></code> method also reports missing data. (Or more precisely, it reports non-missing data, so for example we can infer below that <code class="docutils literal notranslate"><span class="pre">6433-6389</span> <span class="pre">=</span> <span class="pre">44</span></code> values are missing from the “payment” column.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 6433 entries, 0 to 6432
Data columns (total 14 columns):
 #   Column           Non-Null Count  Dtype  
---  ------           --------------  -----  
 0   pickup           6433 non-null   object 
 1   dropoff          6433 non-null   object 
 2   passengers       6433 non-null   int64  
 3   distance         6433 non-null   float64
 4   fare             6433 non-null   float64
 5   tip              6433 non-null   float64
 6   tolls            6433 non-null   float64
 7   total            6433 non-null   float64
 8   color            6433 non-null   object 
 9   payment          6389 non-null   object 
 10  pickup_zone      6407 non-null   object 
 11  dropoff_zone     6388 non-null   object 
 12  pickup_borough   6407 non-null   object 
 13  dropoff_borough  6388 non-null   object 
dtypes: float64(5), int64(1), object(8)
memory usage: 703.7+ KB
</pre></div>
</div>
</div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">describe</span></code> method is returns information about the distribution of numbers in numeric columns.  For example, we can see that the median fare is <code class="docutils literal notranslate"><span class="pre">6.5</span></code> (the 50-th percentile), whereas the mean fare is <code class="docutils literal notranslate"><span class="pre">13.09</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>passengers</th>
      <th>distance</th>
      <th>fare</th>
      <th>tip</th>
      <th>tolls</th>
      <th>total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>6433.000000</td>
      <td>6433.000000</td>
      <td>6433.000000</td>
      <td>6433.00000</td>
      <td>6433.000000</td>
      <td>6433.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>1.539251</td>
      <td>3.024617</td>
      <td>13.091073</td>
      <td>1.97922</td>
      <td>0.325273</td>
      <td>18.517794</td>
    </tr>
    <tr>
      <th>std</th>
      <td>1.203768</td>
      <td>3.827867</td>
      <td>11.551804</td>
      <td>2.44856</td>
      <td>1.415267</td>
      <td>13.815570</td>
    </tr>
    <tr>
      <th>min</th>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>1.000000</td>
      <td>0.00000</td>
      <td>0.000000</td>
      <td>1.300000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>1.000000</td>
      <td>0.980000</td>
      <td>6.500000</td>
      <td>0.00000</td>
      <td>0.000000</td>
      <td>10.800000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>1.000000</td>
      <td>1.640000</td>
      <td>9.500000</td>
      <td>1.70000</td>
      <td>0.000000</td>
      <td>14.160000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>2.000000</td>
      <td>3.210000</td>
      <td>15.000000</td>
      <td>2.80000</td>
      <td>0.000000</td>
      <td>20.300000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>6.000000</td>
      <td>36.700000</td>
      <td>150.000000</td>
      <td>33.20000</td>
      <td>24.020000</td>
      <td>174.820000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>How many different values are there in the “pickup_borough” column?  First get the pandas Series containing that column, then</p>
<ul class="simple">
<li><p>use the <code class="docutils literal notranslate"><span class="pre">unique</span></code> method;</p></li>
<li><p>use the <code class="docutils literal notranslate"><span class="pre">value_counts</span></code> method.</p></li>
</ul>
<p>We first define a pandas Series <code class="docutils literal notranslate"><span class="pre">ser</span></code> that will be equal to the “pickup_borough” column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ser</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;pickup_borough&quot;</span><span class="p">]</span>
<span class="n">ser</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0       Manhattan
1       Manhattan
2       Manhattan
3       Manhattan
4       Manhattan
          ...    
6428    Manhattan
6429       Queens
6430     Brooklyn
6431     Brooklyn
6432     Brooklyn
Name: pickup_borough, Length: 6433, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Notice that this is indeed a pandas Series.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">ser</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>pandas.core.series.Series
</pre></div>
</div>
</div>
</div>
<p>We now call the <code class="docutils literal notranslate"><span class="pre">unique</span></code> method.  This gets us the distinct values which occur in the Series (including the missing value, represented as <code class="docutils literal notranslate"><span class="pre">nan</span></code>, which stands for “not a number”).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ser</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;Manhattan&#39;, &#39;Queens&#39;, nan, &#39;Bronx&#39;, &#39;Brooklyn&#39;], dtype=object)
</pre></div>
</div>
</div>
</div>
<p>The output is a NumPy array.  (NumPy is a dependency of pandas, so anyone who has pandas installed will also have NumPy installed.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>numpy.ndarray
</pre></div>
</div>
</div>
</div>
<p>If we want a programmatic way of counting how many unique values there are, we can use the Python function <code class="docutils literal notranslate"><span class="pre">len</span></code>.  (If we wanted to not count the missing value, we’d have to work harder.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">ser</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5
</pre></div>
</div>
</div>
</div>
<p>Notice that <code class="docutils literal notranslate"><span class="pre">unique</span></code> is a Series method, not a DataFrame method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># don&#39;t know if this works</span>
<span class="n">df</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">13</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># don&#39;t know if this works</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">df</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>

<span class="nn">File ~/mambaforge/envs/math10s23/lib/python3.9/site-packages/pandas/core/generic.py:5902,</span> in <span class="ni">NDFrame.__getattr__</span><span class="nt">(self, name)</span>
<span class="g g-Whitespace">   </span><span class="mi">5895</span> <span class="k">if</span> <span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">5896</span>     <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_internal_names_set</span>
<span class="g g-Whitespace">   </span><span class="mi">5897</span>     <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span>
<span class="g g-Whitespace">   </span><span class="mi">5898</span>     <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessors</span>
<span class="g g-Whitespace">   </span><span class="mi">5899</span>     <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_info_axis</span><span class="o">.</span><span class="n">_can_hold_identifiers_and_holds_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">5900</span> <span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">5901</span>     <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
<span class="ne">-&gt; </span><span class="mi">5902</span> <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

<span class="ne">AttributeError</span>: &#39;DataFrame&#39; object has no attribute &#39;unique&#39;
</pre></div>
</div>
</div>
</div>
<p>Aside: there was a question about how we could get this column using <code class="docutils literal notranslate"><span class="pre">loc</span></code> or <code class="docutils literal notranslate"><span class="pre">iloc</span></code>.  The first thing you might try, <code class="docutils literal notranslate"><span class="pre">df.loc[&quot;pickup_borough&quot;]</span></code> does not work, because this is looking for a row named <code class="docutils literal notranslate"><span class="pre">&quot;pickup_borough&quot;</span></code>.</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;pickup_borough&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">14</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;pickup_borough&quot;</span><span class="p">]</span>

<span class="nn">File ~/mambaforge/envs/math10s23/lib/python3.9/site-packages/pandas/core/indexing.py:1073,</span> in <span class="ni">_LocationIndexer.__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">1070</span> <span class="n">axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span> <span class="ow">or</span> <span class="mi">0</span>
<span class="g g-Whitespace">   </span><span class="mi">1072</span> <span class="n">maybe_callable</span> <span class="o">=</span> <span class="n">com</span><span class="o">.</span><span class="n">apply_if_callable</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1073</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_axis</span><span class="p">(</span><span class="n">maybe_callable</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>

<span class="nn">File ~/mambaforge/envs/math10s23/lib/python3.9/site-packages/pandas/core/indexing.py:1312,</span> in <span class="ni">_LocIndexer._getitem_axis</span><span class="nt">(self, key, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">1310</span> <span class="c1"># fall thru to straight lookup</span>
<span class="g g-Whitespace">   </span><span class="mi">1311</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_key</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">1312</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_label</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>

<span class="nn">File ~/mambaforge/envs/math10s23/lib/python3.9/site-packages/pandas/core/indexing.py:1260,</span> in <span class="ni">_LocIndexer._get_label</span><span class="nt">(self, label, axis)</span>
<span class="g g-Whitespace">   </span><span class="mi">1258</span> <span class="k">def</span> <span class="nf">_get_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">axis</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">1259</span>     <span class="c1"># GH#5567 this will fail if the label is not present in the axis.</span>
<span class="ne">-&gt; </span><span class="mi">1260</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">obj</span><span class="o">.</span><span class="n">xs</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>

<span class="nn">File ~/mambaforge/envs/math10s23/lib/python3.9/site-packages/pandas/core/generic.py:4056,</span> in <span class="ni">NDFrame.xs</span><span class="nt">(self, key, axis, level, drop_level)</span>
<span class="g g-Whitespace">   </span><span class="mi">4054</span>             <span class="n">new_index</span> <span class="o">=</span> <span class="n">index</span><span class="p">[</span><span class="n">loc</span><span class="p">]</span>
<span class="g g-Whitespace">   </span><span class="mi">4055</span> <span class="k">else</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">4056</span>     <span class="n">loc</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">4058</span>     <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">loc</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">4059</span>         <span class="k">if</span> <span class="n">loc</span><span class="o">.</span><span class="n">dtype</span> <span class="o">==</span> <span class="n">np</span><span class="o">.</span><span class="n">bool_</span><span class="p">:</span>

<span class="nn">File ~/mambaforge/envs/math10s23/lib/python3.9/site-packages/pandas/core/indexes/range.py:395,</span> in <span class="ni">RangeIndex.get_loc</span><span class="nt">(self, key, method, tolerance)</span>
<span class="g g-Whitespace">    </span><span class="mi">393</span>             <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>
<span class="g g-Whitespace">    </span><span class="mi">394</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_check_indexing_error</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">395</span>     <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">396</span> <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="n">tolerance</span><span class="p">)</span>

<span class="ne">KeyError</span>: &#39;pickup_borough&#39;
</pre></div>
</div>
</div>
</div>
<p>Here is the right way using <code class="docutils literal notranslate"><span class="pre">loc</span></code>.  It is definitely more convenient to use <code class="docutils literal notranslate"><span class="pre">df[&quot;pickup_borough&quot;]</span></code> rather than the following.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;pickup_borough&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0       Manhattan
1       Manhattan
2       Manhattan
3       Manhattan
4       Manhattan
          ...    
6428    Manhattan
6429       Queens
6430     Brooklyn
6431     Brooklyn
6432     Brooklyn
Name: pickup_borough, Length: 6433, dtype: object
</pre></div>
</div>
</div>
</div>
<p>If we want to use <code class="docutils literal notranslate"><span class="pre">iloc</span></code>, we need to find the integer position of the “pickup_borough” column.  We can use the <code class="docutils literal notranslate"><span class="pre">columns</span></code> attribute to see all the columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;pickup&#39;, &#39;dropoff&#39;, &#39;passengers&#39;, &#39;distance&#39;, &#39;fare&#39;, &#39;tip&#39;, &#39;tolls&#39;,
       &#39;total&#39;, &#39;color&#39;, &#39;payment&#39;, &#39;pickup_zone&#39;, &#39;dropoff_zone&#39;,
       &#39;pickup_borough&#39;, &#39;dropoff_borough&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>Here I just counted (remember to start counting at <code class="docutils literal notranslate"><span class="pre">0</span></code>).  There are of course more sophisticated ways also; ask if you’re interested!  The following is the <code class="docutils literal notranslate"><span class="pre">iloc</span></code> way to get the “pickup_borough” column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="mi">12</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0       Manhattan
1       Manhattan
2       Manhattan
3       Manhattan
4       Manhattan
          ...    
6428    Manhattan
6429       Queens
6430     Brooklyn
6431     Brooklyn
6432     Brooklyn
Name: pickup_borough, Length: 6433, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Indexing in pandas is confusing and you should not expect to be comfortable with it until you have practiced for at least a few weeks.  If we use square brackets and what’s called a “slice” (using colon <code class="docutils literal notranslate"><span class="pre">:</span></code>), and we don’t use <code class="docutils literal notranslate"><span class="pre">loc</span></code> or <code class="docutils literal notranslate"><span class="pre">iloc</span></code>, then this accesses rows.</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># First three rows</span>
<span class="n">df</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pickup</th>
      <th>dropoff</th>
      <th>passengers</th>
      <th>distance</th>
      <th>fare</th>
      <th>tip</th>
      <th>tolls</th>
      <th>total</th>
      <th>color</th>
      <th>payment</th>
      <th>pickup_zone</th>
      <th>dropoff_zone</th>
      <th>pickup_borough</th>
      <th>dropoff_borough</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019-03-23 20:21:09</td>
      <td>2019-03-23 20:27:24</td>
      <td>1</td>
      <td>1.60</td>
      <td>7.0</td>
      <td>2.15</td>
      <td>0.0</td>
      <td>12.95</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>Lenox Hill West</td>
      <td>UN/Turtle Bay South</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2019-03-04 16:11:55</td>
      <td>2019-03-04 16:19:00</td>
      <td>1</td>
      <td>0.79</td>
      <td>5.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>9.30</td>
      <td>yellow</td>
      <td>cash</td>
      <td>Upper West Side South</td>
      <td>Upper West Side South</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2019-03-27 17:53:01</td>
      <td>2019-03-27 18:00:25</td>
      <td>1</td>
      <td>1.37</td>
      <td>7.5</td>
      <td>2.36</td>
      <td>0.0</td>
      <td>14.16</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>Alphabet City</td>
      <td>West Village</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>If we use just an integer (not a slice), then it is looking for columns.  I found this pretty confusing at first, but eventually got used to it.</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># looking for a column named 3</span>
<span class="n">df</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="nn">File ~/mambaforge/envs/math10s23/lib/python3.9/site-packages/pandas/core/indexes/base.py:3802,</span> in <span class="ni">Index.get_loc</span><span class="nt">(self, key, method, tolerance)</span>
<span class="g g-Whitespace">   </span><span class="mi">3801</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">3802</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_engine</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">casted_key</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">3803</span> <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>

<span class="nn">File ~/mambaforge/envs/math10s23/lib/python3.9/site-packages/pandas/_libs/index.pyx:138,</span> in <span class="ni">pandas._libs.index.IndexEngine.get_loc</span><span class="nt">()</span>

<span class="nn">File ~/mambaforge/envs/math10s23/lib/python3.9/site-packages/pandas/_libs/index.pyx:165,</span> in <span class="ni">pandas._libs.index.IndexEngine.get_loc</span><span class="nt">()</span>

<span class="nn">File pandas/_libs/hashtable_class_helper.pxi:5745,</span> in <span class="ni">pandas._libs.hashtable.PyObjectHashTable.get_item</span><span class="nt">()</span>

<span class="nn">File pandas/_libs/hashtable_class_helper.pxi:5753,</span> in <span class="ni">pandas._libs.hashtable.PyObjectHashTable.get_item</span><span class="nt">()</span>

<span class="ne">KeyError</span>: 3

<span class="n">The</span> <span class="n">above</span> <span class="n">exception</span> <span class="n">was</span> <span class="n">the</span> <span class="n">direct</span> <span class="n">cause</span> <span class="n">of</span> <span class="n">the</span> <span class="n">following</span> <span class="n">exception</span><span class="p">:</span>

<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">20</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># looking for a column named 3</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">df</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>

<span class="nn">File ~/mambaforge/envs/math10s23/lib/python3.9/site-packages/pandas/core/frame.py:3807,</span> in <span class="ni">DataFrame.__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">3805</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">nlevels</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">3806</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getitem_multilevel</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">3807</span> <span class="n">indexer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">3808</span> <span class="k">if</span> <span class="n">is_integer</span><span class="p">(</span><span class="n">indexer</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">3809</span>     <span class="n">indexer</span> <span class="o">=</span> <span class="p">[</span><span class="n">indexer</span><span class="p">]</span>

<span class="nn">File ~/mambaforge/envs/math10s23/lib/python3.9/site-packages/pandas/core/indexes/base.py:3804,</span> in <span class="ni">Index.get_loc</span><span class="nt">(self, key, method, tolerance)</span>
<span class="g g-Whitespace">   </span><span class="mi">3802</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_engine</span><span class="o">.</span><span class="n">get_loc</span><span class="p">(</span><span class="n">casted_key</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">3803</span> <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">3804</span>     <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">err</span>
<span class="g g-Whitespace">   </span><span class="mi">3805</span> <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">3806</span>     <span class="c1"># If we have a listlike key, _check_indexing_error will raise</span>
<span class="g g-Whitespace">   </span><span class="mi">3807</span>     <span class="c1">#  InvalidIndexError. Otherwise we fall through and re-raise</span>
<span class="g g-Whitespace">   </span><span class="mi">3808</span>     <span class="c1">#  the TypeError.</span>
<span class="g g-Whitespace">   </span><span class="mi">3809</span>     <span class="bp">self</span><span class="o">.</span><span class="n">_check_indexing_error</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

<span class="ne">KeyError</span>: 3
</pre></div>
</div>
</div>
</div>
</section>
<section id="working-with-dates-in-pandas">
<h2>Working with dates in pandas<a class="headerlink" href="#working-with-dates-in-pandas" title="Permalink to this heading">#</a></h2>
<p>Here is a reminder of how <code class="docutils literal notranslate"><span class="pre">df</span></code> looks.</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pickup</th>
      <th>dropoff</th>
      <th>passengers</th>
      <th>distance</th>
      <th>fare</th>
      <th>tip</th>
      <th>tolls</th>
      <th>total</th>
      <th>color</th>
      <th>payment</th>
      <th>pickup_zone</th>
      <th>dropoff_zone</th>
      <th>pickup_borough</th>
      <th>dropoff_borough</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>4997</th>
      <td>2019-03-16 11:04:35</td>
      <td>2019-03-16 11:40:25</td>
      <td>5</td>
      <td>6.31</td>
      <td>26.0</td>
      <td>3.00</td>
      <td>0.0</td>
      <td>32.30</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>TriBeCa/Civic Center</td>
      <td>Upper East Side North</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
    </tr>
    <tr>
      <th>4905</th>
      <td>2019-03-12 16:23:50</td>
      <td>2019-03-12 16:27:07</td>
      <td>5</td>
      <td>0.56</td>
      <td>4.5</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>8.80</td>
      <td>yellow</td>
      <td>cash</td>
      <td>Clinton East</td>
      <td>Clinton East</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
    </tr>
    <tr>
      <th>536</th>
      <td>2019-03-22 15:59:29</td>
      <td>2019-03-22 16:10:08</td>
      <td>1</td>
      <td>0.52</td>
      <td>8.0</td>
      <td>2.26</td>
      <td>0.0</td>
      <td>13.56</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>Clinton East</td>
      <td>Times Sq/Theatre District</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>Convert the “pickup” and “dropoff” columns to datetime values, using the pandas function <code class="docutils literal notranslate"><span class="pre">to_datetime</span></code>.  Save the results as new columns in <code class="docutils literal notranslate"><span class="pre">df</span></code>, named “picktime” and “droptime”.</p></li>
</ul>
<p>Here is the “pickup” column.  We can recognize these as dates, but for now, they are just strings to Python and to pandas.  (Notice that it is reported as an “object” data type.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;pickup&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0       2019-03-23 20:21:09
1       2019-03-04 16:11:55
2       2019-03-27 17:53:01
3       2019-03-10 01:23:59
4       2019-03-30 13:27:42
               ...         
6428    2019-03-31 09:51:53
6429    2019-03-31 17:38:00
6430    2019-03-23 22:55:18
6431    2019-03-04 10:09:25
6432    2019-03-13 19:31:22
Name: pickup, Length: 6433, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Notice how the data type changes to “datetime64[ns]” in the following output (it has no affect on the original column).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;pickup&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0      2019-03-23 20:21:09
1      2019-03-04 16:11:55
2      2019-03-27 17:53:01
3      2019-03-10 01:23:59
4      2019-03-30 13:27:42
               ...        
6428   2019-03-31 09:51:53
6429   2019-03-31 17:38:00
6430   2019-03-23 22:55:18
6431   2019-03-04 10:09:25
6432   2019-03-13 19:31:22
Name: pickup, Length: 6433, dtype: datetime64[ns]
</pre></div>
</div>
</div>
</div>
<p>Let’s see in a smaller example how the <code class="docutils literal notranslate"><span class="pre">pd.to_datetime</span></code> function works.  We start out by defining a string representing today’s date.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">today</span> <span class="o">=</span> <span class="s2">&quot;April 12, 2023&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>This is just a string.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">today</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>str
</pre></div>
</div>
</div>
</div>
<p>Here we convert it to a Timestamp using <code class="docutils literal notranslate"><span class="pre">pd.to_datetime</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ts</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">today</span><span class="p">)</span>
<span class="n">ts</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Timestamp(&#39;2023-04-12 00:00:00&#39;)
</pre></div>
</div>
</div>
</div>
<p>We now have access to all sorts of additional information related to this date.</p>
<p>I can never remember which of these are methods and which are attributes.  Here I tried calling <code class="docutils literal notranslate"><span class="pre">day_of_year</span></code> as a method, but that was incorrect.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ts</span><span class="o">.</span><span class="n">day_of_year</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">28</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">ts</span><span class="o">.</span><span class="n">day_of_year</span><span class="p">()</span>

<span class="ne">TypeError</span>: &#39;int&#39; object is not callable
</pre></div>
</div>
</div>
</div>
<p>The attribute usage is correct.  This is telling us that April 12th is the 102nd day of 2023.  (I’m not sure if this starts counting at 0 or not, I would guess that it does.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ts</span><span class="o">.</span><span class="n">day_of_year</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>102
</pre></div>
</div>
</div>
</div>
<p>We can also get the name of the day.  (Notice that this one is indeed a method.  To my eyes, it’s a little unpredictable which are methods.  Whether <code class="docutils literal notranslate"><span class="pre">day_name</span></code> or <code class="docutils literal notranslate"><span class="pre">day_of_year</span></code> is a method is definitely not something you would be tested on.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ts</span><span class="o">.</span><span class="n">day_name</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Wednesday&#39;
</pre></div>
</div>
</div>
</div>
<p>If you want to see all the various attributes and methods, you can evaluate <code class="docutils literal notranslate"><span class="pre">dir</span></code>. Probably you should ignore the ones which begin and end with two underscores, which are called “dunder methods” (for “double underscore”), and are typically not used by us directly.</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">dir</span><span class="p">(</span><span class="n">ts</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;__add__&#39;,
 &#39;__array_priority__&#39;,
 &#39;__class__&#39;,
 &#39;__delattr__&#39;,
 &#39;__dict__&#39;,
 &#39;__dir__&#39;,
 &#39;__doc__&#39;,
 &#39;__eq__&#39;,
 &#39;__format__&#39;,
 &#39;__ge__&#39;,
 &#39;__getattribute__&#39;,
 &#39;__gt__&#39;,
 &#39;__hash__&#39;,
 &#39;__init__&#39;,
 &#39;__init_subclass__&#39;,
 &#39;__le__&#39;,
 &#39;__lt__&#39;,
 &#39;__module__&#39;,
 &#39;__ne__&#39;,
 &#39;__new__&#39;,
 &#39;__pyx_vtable__&#39;,
 &#39;__radd__&#39;,
 &#39;__reduce__&#39;,
 &#39;__reduce_cython__&#39;,
 &#39;__reduce_ex__&#39;,
 &#39;__repr__&#39;,
 &#39;__rsub__&#39;,
 &#39;__setattr__&#39;,
 &#39;__setstate__&#39;,
 &#39;__setstate_cython__&#39;,
 &#39;__sizeof__&#39;,
 &#39;__str__&#39;,
 &#39;__sub__&#39;,
 &#39;__subclasshook__&#39;,
 &#39;__weakref__&#39;,
 &#39;_as_unit&#39;,
 &#39;_date_repr&#39;,
 &#39;_freq&#39;,
 &#39;_freqstr&#39;,
 &#39;_from_dt64&#39;,
 &#39;_from_value_and_reso&#39;,
 &#39;_repr_base&#39;,
 &#39;_reso&#39;,
 &#39;_round&#39;,
 &#39;_set_freq&#39;,
 &#39;_short_repr&#39;,
 &#39;_time_repr&#39;,
 &#39;asm8&#39;,
 &#39;astimezone&#39;,
 &#39;ceil&#39;,
 &#39;combine&#39;,
 &#39;ctime&#39;,
 &#39;date&#39;,
 &#39;day&#39;,
 &#39;day_name&#39;,
 &#39;day_of_week&#39;,
 &#39;day_of_year&#39;,
 &#39;dayofweek&#39;,
 &#39;dayofyear&#39;,
 &#39;days_in_month&#39;,
 &#39;daysinmonth&#39;,
 &#39;dst&#39;,
 &#39;floor&#39;,
 &#39;fold&#39;,
 &#39;freq&#39;,
 &#39;freqstr&#39;,
 &#39;fromisocalendar&#39;,
 &#39;fromisoformat&#39;,
 &#39;fromordinal&#39;,
 &#39;fromtimestamp&#39;,
 &#39;hour&#39;,
 &#39;is_leap_year&#39;,
 &#39;is_month_end&#39;,
 &#39;is_month_start&#39;,
 &#39;is_quarter_end&#39;,
 &#39;is_quarter_start&#39;,
 &#39;is_year_end&#39;,
 &#39;is_year_start&#39;,
 &#39;isocalendar&#39;,
 &#39;isoformat&#39;,
 &#39;isoweekday&#39;,
 &#39;max&#39;,
 &#39;microsecond&#39;,
 &#39;min&#39;,
 &#39;minute&#39;,
 &#39;month&#39;,
 &#39;month_name&#39;,
 &#39;nanosecond&#39;,
 &#39;normalize&#39;,
 &#39;now&#39;,
 &#39;quarter&#39;,
 &#39;replace&#39;,
 &#39;resolution&#39;,
 &#39;round&#39;,
 &#39;second&#39;,
 &#39;strftime&#39;,
 &#39;strptime&#39;,
 &#39;time&#39;,
 &#39;timestamp&#39;,
 &#39;timetuple&#39;,
 &#39;timetz&#39;,
 &#39;to_datetime64&#39;,
 &#39;to_julian_date&#39;,
 &#39;to_numpy&#39;,
 &#39;to_period&#39;,
 &#39;to_pydatetime&#39;,
 &#39;today&#39;,
 &#39;toordinal&#39;,
 &#39;tz&#39;,
 &#39;tz_convert&#39;,
 &#39;tz_localize&#39;,
 &#39;tzinfo&#39;,
 &#39;tzname&#39;,
 &#39;utcfromtimestamp&#39;,
 &#39;utcnow&#39;,
 &#39;utcoffset&#39;,
 &#39;utctimetuple&#39;,
 &#39;value&#39;,
 &#39;week&#39;,
 &#39;weekday&#39;,
 &#39;weekofyear&#39;,
 &#39;year&#39;]
</pre></div>
</div>
</div>
</div>
<p>Here we are adding two new columns to the DataFrame.  We name them “picktime” and “droptime”.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># syntax for a new column in df</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;picktime&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;pickup&quot;</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;droptime&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;dropoff&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p>Notice how these new columns have shown up all the way on the right side.</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pickup</th>
      <th>dropoff</th>
      <th>passengers</th>
      <th>distance</th>
      <th>fare</th>
      <th>tip</th>
      <th>tolls</th>
      <th>total</th>
      <th>color</th>
      <th>payment</th>
      <th>pickup_zone</th>
      <th>dropoff_zone</th>
      <th>pickup_borough</th>
      <th>dropoff_borough</th>
      <th>picktime</th>
      <th>droptime</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019-03-23 20:21:09</td>
      <td>2019-03-23 20:27:24</td>
      <td>1</td>
      <td>1.60</td>
      <td>7.0</td>
      <td>2.15</td>
      <td>0.0</td>
      <td>12.95</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>Lenox Hill West</td>
      <td>UN/Turtle Bay South</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
      <td>2019-03-23 20:21:09</td>
      <td>2019-03-23 20:27:24</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2019-03-04 16:11:55</td>
      <td>2019-03-04 16:19:00</td>
      <td>1</td>
      <td>0.79</td>
      <td>5.0</td>
      <td>0.00</td>
      <td>0.0</td>
      <td>9.30</td>
      <td>yellow</td>
      <td>cash</td>
      <td>Upper West Side South</td>
      <td>Upper West Side South</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
      <td>2019-03-04 16:11:55</td>
      <td>2019-03-04 16:19:00</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2019-03-27 17:53:01</td>
      <td>2019-03-27 18:00:25</td>
      <td>1</td>
      <td>1.37</td>
      <td>7.5</td>
      <td>2.36</td>
      <td>0.0</td>
      <td>14.16</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>Alphabet City</td>
      <td>West Village</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
      <td>2019-03-27 17:53:01</td>
      <td>2019-03-27 18:00:25</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2019-03-10 01:23:59</td>
      <td>2019-03-10 01:49:51</td>
      <td>1</td>
      <td>7.70</td>
      <td>27.0</td>
      <td>6.15</td>
      <td>0.0</td>
      <td>36.95</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>Hudson Sq</td>
      <td>Yorkville West</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
      <td>2019-03-10 01:23:59</td>
      <td>2019-03-10 01:49:51</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2019-03-30 13:27:42</td>
      <td>2019-03-30 13:37:14</td>
      <td>3</td>
      <td>2.16</td>
      <td>9.0</td>
      <td>1.10</td>
      <td>0.0</td>
      <td>13.40</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>Midtown East</td>
      <td>Yorkville West</td>
      <td>Manhattan</td>
      <td>Manhattan</td>
      <td>2019-03-30 13:27:42</td>
      <td>2019-03-30 13:37:14</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>Make a new column, “day”, containing the day of the week of the pickup.  Use the accessor <code class="docutils literal notranslate"><span class="pre">dt</span></code> and then the method <code class="docutils literal notranslate"><span class="pre">day_name</span></code>.</p></li>
</ul>
<p>If we try to call <code class="docutils literal notranslate"><span class="pre">day_name</span></code> on the Series directly, even though it contains datetime values, we get an error.  We need to use the <code class="docutils literal notranslate"><span class="pre">dt</span></code> accessor to apply these kind of methods to the entries in the Series.</p>
<p>It might be hard for you as students to know what you should remember for a quiz and what is less important.  I would like you to remember that the <code class="docutils literal notranslate"><span class="pre">dt</span></code> accessor (and the <code class="docutils literal notranslate"><span class="pre">str</span></code> accessor below) are required.</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;picktime&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">day_name</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">34</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;picktime&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">day_name</span><span class="p">()</span>

<span class="nn">File ~/mambaforge/envs/math10s23/lib/python3.9/site-packages/pandas/core/generic.py:5902,</span> in <span class="ni">NDFrame.__getattr__</span><span class="nt">(self, name)</span>
<span class="g g-Whitespace">   </span><span class="mi">5895</span> <span class="k">if</span> <span class="p">(</span>
<span class="g g-Whitespace">   </span><span class="mi">5896</span>     <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_internal_names_set</span>
<span class="g g-Whitespace">   </span><span class="mi">5897</span>     <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_metadata</span>
<span class="g g-Whitespace">   </span><span class="mi">5898</span>     <span class="ow">and</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_accessors</span>
<span class="g g-Whitespace">   </span><span class="mi">5899</span>     <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_info_axis</span><span class="o">.</span><span class="n">_can_hold_identifiers_and_holds_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">5900</span> <span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">5901</span>     <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
<span class="ne">-&gt; </span><span class="mi">5902</span> <span class="k">return</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

<span class="ne">AttributeError</span>: &#39;Series&#39; object has no attribute &#39;day_name&#39;
</pre></div>
</div>
</div>
</div>
<p>Here we successfully use the <code class="docutils literal notranslate"><span class="pre">dt</span></code> accessor.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;day&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;picktime&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">day_name</span><span class="p">()</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;day&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0        Saturday
1          Monday
2       Wednesday
3          Sunday
4        Saturday
          ...    
6428       Sunday
6429       Sunday
6430     Saturday
6431       Monday
6432    Wednesday
Name: day, Length: 6433, dtype: object
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>Make a new column “duration” containing the amount of time the ride took.  (Now that pandas recognizes these as dates, you can just subtract.)</p></li>
</ul>
<p>Let’s remind ourselves what columns are available.  The ones we want to use are near the end.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;pickup&#39;, &#39;dropoff&#39;, &#39;passengers&#39;, &#39;distance&#39;, &#39;fare&#39;, &#39;tip&#39;, &#39;tolls&#39;,
       &#39;total&#39;, &#39;color&#39;, &#39;payment&#39;, &#39;pickup_zone&#39;, &#39;dropoff_zone&#39;,
       &#39;pickup_borough&#39;, &#39;dropoff_borough&#39;, &#39;picktime&#39;, &#39;droptime&#39;, &#39;day&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>This sort of subtraction of times would never work if we hadn’t converted them to datetime types using <code class="docutils literal notranslate"><span class="pre">pd.to_datetime</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;droptime&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;picktime&quot;</span><span class="p">]</span>
<span class="n">df</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0      0 days 00:06:15
1      0 days 00:07:05
2      0 days 00:07:24
3      0 days 00:25:52
4      0 days 00:09:32
             ...      
6428   0 days 00:03:34
6429   0 days 00:56:23
6430   0 days 00:19:07
6431   0 days 00:05:04
6432   0 days 00:16:40
Name: duration, Length: 6433, dtype: timedelta64[ns]
</pre></div>
</div>
</div>
</div>
<p>Here we check out the first three rows and first two columns.  Does the top row look like a 6 minute taxi ride?  Yes, because it went from 8:21pm to 8:27pm.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pickup</th>
      <th>dropoff</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2019-03-23 20:21:09</td>
      <td>2019-03-23 20:27:24</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2019-03-04 16:11:55</td>
      <td>2019-03-04 16:19:00</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2019-03-27 17:53:01</td>
      <td>2019-03-27 18:00:25</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<ul class="simple">
<li><p>What are the data types of these four columns we just made?</p></li>
</ul>
<p>Notice how the first two we made are called “datetime64[ns]”, whereas the last one is called a “timedelta64[ns]”.  When you see “delta”, you should usually think “difference”, and that’s exactly what this column represents.  The middle column, “day”, is reported as object, because they are just strings like <code class="docutils literal notranslate"><span class="pre">&quot;Monday&quot;</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>pickup                      object
dropoff                     object
passengers                   int64
distance                   float64
fare                       float64
tip                        float64
tolls                      float64
total                      float64
color                       object
payment                     object
pickup_zone                 object
dropoff_zone                object
pickup_borough              object
dropoff_borough             object
picktime            datetime64[ns]
droptime            datetime64[ns]
day                         object
duration           timedelta64[ns]
dtype: object
</pre></div>
</div>
</div>
</div>
</section>
<section id="working-with-strings-in-pandas">
<h2>Working with strings in pandas<a class="headerlink" href="#working-with-strings-in-pandas" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>How many rows in <code class="docutils literal notranslate"><span class="pre">df</span></code> have the word “Airport” in either the “pickup_zone” column or the “dropoff_zone” column?  Do any rows have the word “Airport” in both columns?</p></li>
</ul>
<p>Use the <code class="docutils literal notranslate"><span class="pre">str</span></code> accessor and the <code class="docutils literal notranslate"><span class="pre">contains</span></code> method.</p>
<p>Here we check out the first three entries in the “pickup_zone” column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;pickup_zone&quot;</span><span class="p">][:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0          Lenox Hill West
1    Upper West Side South
2            Alphabet City
Name: pickup_zone, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Here is an example of how <code class="docutils literal notranslate"><span class="pre">str.contains</span></code> works.  Only the middle of these three contains the substring <code class="docutils literal notranslate"><span class="pre">&quot;South&quot;</span></code>, so we get <code class="docutils literal notranslate"><span class="pre">False</span></code> then <code class="docutils literal notranslate"><span class="pre">True</span></code> then <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;pickup_zone&quot;</span><span class="p">][:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;South&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0    False
1     True
2    False
Name: pickup_zone, dtype: bool
</pre></div>
</div>
</div>
</div>
<p>We now do the same thing for the word “Airport”.  We save these Boolean Series.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ps</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;pickup_zone&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;Airport&quot;</span><span class="p">)</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;dropoff_zone&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s2">&quot;Airport&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Here are the first three values.  None of these first three contains the substring <code class="docutils literal notranslate"><span class="pre">&quot;Airport&quot;</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ps</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0    False
1    False
2    False
Name: pickup_zone, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Here we use Boolean indexing to find all the rows where either the “pickup_zone” or the “dropoff_zone” column contains the substring “Airport”.  Notice how the logical or is made using a vertical bar.  (Don’t spell it out in this context.  Spelled out <code class="docutils literal notranslate"><span class="pre">or</span></code> is used in some contexts in Python, but not with NumPy Boolean arrays or pandas Boolean Series.)</p>
<p>Scorll to the right and check that each of these rows really does involve an “Airport”.</p>
<div class="cell tag_output_scroll docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="n">ps</span> <span class="o">|</span> <span class="n">ds</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pickup</th>
      <th>dropoff</th>
      <th>passengers</th>
      <th>distance</th>
      <th>fare</th>
      <th>tip</th>
      <th>tolls</th>
      <th>total</th>
      <th>color</th>
      <th>payment</th>
      <th>pickup_zone</th>
      <th>dropoff_zone</th>
      <th>pickup_borough</th>
      <th>dropoff_borough</th>
      <th>picktime</th>
      <th>droptime</th>
      <th>day</th>
      <th>duration</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>10</th>
      <td>2019-03-16 10:02:25</td>
      <td>2019-03-16 10:22:29</td>
      <td>1</td>
      <td>3.90</td>
      <td>17.00</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>17.80</td>
      <td>yellow</td>
      <td>cash</td>
      <td>LaGuardia Airport</td>
      <td>Astoria</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-16 10:02:25</td>
      <td>2019-03-16 10:22:29</td>
      <td>Saturday</td>
      <td>0 days 00:20:04</td>
    </tr>
    <tr>
      <th>22</th>
      <td>2019-03-28 17:20:54</td>
      <td>2019-03-28 17:55:57</td>
      <td>1</td>
      <td>9.82</td>
      <td>31.50</td>
      <td>8.31</td>
      <td>5.76</td>
      <td>49.87</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>LaGuardia Airport</td>
      <td>Sutton Place/Turtle Bay North</td>
      <td>Queens</td>
      <td>Manhattan</td>
      <td>2019-03-28 17:20:54</td>
      <td>2019-03-28 17:55:57</td>
      <td>Thursday</td>
      <td>0 days 00:35:03</td>
    </tr>
    <tr>
      <th>43</th>
      <td>2019-03-27 19:39:16</td>
      <td>2019-03-27 20:00:26</td>
      <td>1</td>
      <td>9.50</td>
      <td>28.00</td>
      <td>0.00</td>
      <td>5.76</td>
      <td>35.06</td>
      <td>yellow</td>
      <td>cash</td>
      <td>LaGuardia Airport</td>
      <td>Washington Heights South</td>
      <td>Queens</td>
      <td>Manhattan</td>
      <td>2019-03-27 19:39:16</td>
      <td>2019-03-27 20:00:26</td>
      <td>Wednesday</td>
      <td>0 days 00:21:10</td>
    </tr>
    <tr>
      <th>53</th>
      <td>2019-03-20 18:49:24</td>
      <td>2019-03-20 19:12:40</td>
      <td>1</td>
      <td>13.45</td>
      <td>36.00</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>37.80</td>
      <td>yellow</td>
      <td>cash</td>
      <td>JFK Airport</td>
      <td>Sunnyside</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-20 18:49:24</td>
      <td>2019-03-20 19:12:40</td>
      <td>Wednesday</td>
      <td>0 days 00:23:16</td>
    </tr>
    <tr>
      <th>56</th>
      <td>2019-03-05 17:57:00</td>
      <td>2019-03-05 18:45:25</td>
      <td>2</td>
      <td>19.59</td>
      <td>52.00</td>
      <td>0.00</td>
      <td>5.76</td>
      <td>65.56</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>JFK Airport</td>
      <td>Upper East Side North</td>
      <td>Queens</td>
      <td>Manhattan</td>
      <td>2019-03-05 17:57:00</td>
      <td>2019-03-05 18:45:25</td>
      <td>Tuesday</td>
      <td>0 days 00:48:25</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>6243</th>
      <td>2019-03-12 11:40:49</td>
      <td>2019-03-12 11:49:23</td>
      <td>1</td>
      <td>3.50</td>
      <td>12.00</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>12.80</td>
      <td>green</td>
      <td>cash</td>
      <td>Steinway</td>
      <td>LaGuardia Airport</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-12 11:40:49</td>
      <td>2019-03-12 11:49:23</td>
      <td>Tuesday</td>
      <td>0 days 00:08:34</td>
    </tr>
    <tr>
      <th>6280</th>
      <td>2019-03-27 12:25:04</td>
      <td>2019-03-27 12:31:15</td>
      <td>1</td>
      <td>2.74</td>
      <td>10.00</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>10.80</td>
      <td>green</td>
      <td>credit card</td>
      <td>Steinway</td>
      <td>LaGuardia Airport</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-27 12:25:04</td>
      <td>2019-03-27 12:31:15</td>
      <td>Wednesday</td>
      <td>0 days 00:06:11</td>
    </tr>
    <tr>
      <th>6322</th>
      <td>2019-03-01 17:03:11</td>
      <td>2019-03-01 17:17:11</td>
      <td>1</td>
      <td>5.39</td>
      <td>17.00</td>
      <td>3.76</td>
      <td>0.00</td>
      <td>22.56</td>
      <td>green</td>
      <td>credit card</td>
      <td>Jamaica</td>
      <td>JFK Airport</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-01 17:03:11</td>
      <td>2019-03-01 17:17:11</td>
      <td>Friday</td>
      <td>0 days 00:14:00</td>
    </tr>
    <tr>
      <th>6396</th>
      <td>2019-03-15 17:44:09</td>
      <td>2019-03-15 18:20:25</td>
      <td>1</td>
      <td>11.44</td>
      <td>41.63</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>42.13</td>
      <td>green</td>
      <td>credit card</td>
      <td>Bushwick South</td>
      <td>LaGuardia Airport</td>
      <td>Brooklyn</td>
      <td>Queens</td>
      <td>2019-03-15 17:44:09</td>
      <td>2019-03-15 18:20:25</td>
      <td>Friday</td>
      <td>0 days 00:36:16</td>
    </tr>
    <tr>
      <th>6398</th>
      <td>2019-03-17 13:07:29</td>
      <td>2019-03-17 13:51:56</td>
      <td>1</td>
      <td>18.39</td>
      <td>50.50</td>
      <td>7.70</td>
      <td>0.00</td>
      <td>59.00</td>
      <td>green</td>
      <td>credit card</td>
      <td>DUMBO/Vinegar Hill</td>
      <td>JFK Airport</td>
      <td>Brooklyn</td>
      <td>Queens</td>
      <td>2019-03-17 13:07:29</td>
      <td>2019-03-17 13:51:56</td>
      <td>Sunday</td>
      <td>0 days 00:44:27</td>
    </tr>
  </tbody>
</table>
<p>407 rows × 18 columns</p>
</div></div></div>
</div>
<p>Here is similar, but we use <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> instead of <code class="docutils literal notranslate"><span class="pre">|</span></code>.  This corresponds to the rows where both the pickup zone and the dropoff zone involved an airport.  Many of these rides were very short (less than a minute).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="n">ps</span> <span class="o">&amp;</span> <span class="n">ds</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pickup</th>
      <th>dropoff</th>
      <th>passengers</th>
      <th>distance</th>
      <th>fare</th>
      <th>tip</th>
      <th>tolls</th>
      <th>total</th>
      <th>color</th>
      <th>payment</th>
      <th>pickup_zone</th>
      <th>dropoff_zone</th>
      <th>pickup_borough</th>
      <th>dropoff_borough</th>
      <th>picktime</th>
      <th>droptime</th>
      <th>day</th>
      <th>duration</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>120</th>
      <td>2019-03-21 17:21:44</td>
      <td>2019-03-21 17:21:49</td>
      <td>1</td>
      <td>0.00</td>
      <td>2.50</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>4.30</td>
      <td>yellow</td>
      <td>cash</td>
      <td>JFK Airport</td>
      <td>JFK Airport</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-21 17:21:44</td>
      <td>2019-03-21 17:21:49</td>
      <td>Thursday</td>
      <td>0 days 00:00:05</td>
    </tr>
    <tr>
      <th>770</th>
      <td>2019-03-02 03:16:59</td>
      <td>2019-03-02 03:17:06</td>
      <td>0</td>
      <td>9.40</td>
      <td>2.50</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>3.80</td>
      <td>yellow</td>
      <td>NaN</td>
      <td>JFK Airport</td>
      <td>JFK Airport</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-02 03:16:59</td>
      <td>2019-03-02 03:17:06</td>
      <td>Saturday</td>
      <td>0 days 00:00:07</td>
    </tr>
    <tr>
      <th>1080</th>
      <td>2019-03-04 14:17:05</td>
      <td>2019-03-04 14:17:13</td>
      <td>1</td>
      <td>0.00</td>
      <td>2.50</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>3.30</td>
      <td>yellow</td>
      <td>cash</td>
      <td>JFK Airport</td>
      <td>JFK Airport</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-04 14:17:05</td>
      <td>2019-03-04 14:17:13</td>
      <td>Monday</td>
      <td>0 days 00:00:08</td>
    </tr>
    <tr>
      <th>1089</th>
      <td>2019-03-10 01:43:32</td>
      <td>2019-03-10 01:45:22</td>
      <td>1</td>
      <td>0.37</td>
      <td>3.50</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>4.80</td>
      <td>yellow</td>
      <td>cash</td>
      <td>JFK Airport</td>
      <td>JFK Airport</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-10 01:43:32</td>
      <td>2019-03-10 01:45:22</td>
      <td>Sunday</td>
      <td>0 days 00:01:50</td>
    </tr>
    <tr>
      <th>1416</th>
      <td>2019-03-09 13:16:32</td>
      <td>2019-03-09 13:46:11</td>
      <td>2</td>
      <td>12.39</td>
      <td>35.00</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>35.80</td>
      <td>yellow</td>
      <td>cash</td>
      <td>LaGuardia Airport</td>
      <td>JFK Airport</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-09 13:16:32</td>
      <td>2019-03-09 13:46:11</td>
      <td>Saturday</td>
      <td>0 days 00:29:39</td>
    </tr>
    <tr>
      <th>1929</th>
      <td>2019-03-13 22:35:35</td>
      <td>2019-03-13 22:35:49</td>
      <td>1</td>
      <td>0.00</td>
      <td>2.50</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>3.80</td>
      <td>yellow</td>
      <td>NaN</td>
      <td>JFK Airport</td>
      <td>JFK Airport</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-13 22:35:35</td>
      <td>2019-03-13 22:35:49</td>
      <td>Wednesday</td>
      <td>0 days 00:00:14</td>
    </tr>
    <tr>
      <th>2387</th>
      <td>2019-03-28 15:58:52</td>
      <td>2019-03-28 15:59:25</td>
      <td>1</td>
      <td>1.80</td>
      <td>69.06</td>
      <td>20.80</td>
      <td>0.00</td>
      <td>90.16</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>JFK Airport</td>
      <td>JFK Airport</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-28 15:58:52</td>
      <td>2019-03-28 15:59:25</td>
      <td>Thursday</td>
      <td>0 days 00:00:33</td>
    </tr>
    <tr>
      <th>3571</th>
      <td>2019-03-22 16:47:41</td>
      <td>2019-03-22 16:47:50</td>
      <td>1</td>
      <td>0.81</td>
      <td>66.00</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>66.80</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>JFK Airport</td>
      <td>JFK Airport</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-22 16:47:41</td>
      <td>2019-03-22 16:47:50</td>
      <td>Friday</td>
      <td>0 days 00:00:09</td>
    </tr>
    <tr>
      <th>4358</th>
      <td>2019-03-06 18:24:00</td>
      <td>2019-03-06 18:24:13</td>
      <td>2</td>
      <td>0.01</td>
      <td>2.50</td>
      <td>0.00</td>
      <td>0.00</td>
      <td>4.30</td>
      <td>yellow</td>
      <td>cash</td>
      <td>JFK Airport</td>
      <td>JFK Airport</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-06 18:24:00</td>
      <td>2019-03-06 18:24:13</td>
      <td>Wednesday</td>
      <td>0 days 00:00:13</td>
    </tr>
    <tr>
      <th>5095</th>
      <td>2019-03-30 20:14:44</td>
      <td>2019-03-30 21:01:28</td>
      <td>3</td>
      <td>18.91</td>
      <td>52.00</td>
      <td>8.78</td>
      <td>5.76</td>
      <td>67.34</td>
      <td>yellow</td>
      <td>credit card</td>
      <td>JFK Airport</td>
      <td>JFK Airport</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-30 20:14:44</td>
      <td>2019-03-30 21:01:28</td>
      <td>Saturday</td>
      <td>0 days 00:46:44</td>
    </tr>
    <tr>
      <th>5364</th>
      <td>2019-03-17 16:59:17</td>
      <td>2019-03-17 18:04:08</td>
      <td>2</td>
      <td>36.70</td>
      <td>150.00</td>
      <td>0.00</td>
      <td>24.02</td>
      <td>174.82</td>
      <td>yellow</td>
      <td>cash</td>
      <td>JFK Airport</td>
      <td>JFK Airport</td>
      <td>Queens</td>
      <td>Queens</td>
      <td>2019-03-17 16:59:17</td>
      <td>2019-03-17 18:04:08</td>
      <td>Sunday</td>
      <td>0 days 01:04:51</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>We didn’t get any further.</p>
<ul class="simple">
<li><p>Alternative, less elegant, approach.  Find the rows where “Airport” is in the “pickup_zone” column by writing an appropriate function and using the <code class="docutils literal notranslate"><span class="pre">map</span></code> method of a pandas Series.  Use the keyword argument <code class="docutils literal notranslate"><span class="pre">na_action=&quot;ignore&quot;</span></code> so that missing values don’t cause errors.</p></li>
</ul>
</section>
<section id="missing-values-in-pandas">
<h2>Missing values in pandas<a class="headerlink" href="#missing-values-in-pandas" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Look at <code class="docutils literal notranslate"><span class="pre">df.info()</span></code> again.  Which columns have missing values?</p></li>
</ul>
<ul class="simple">
<li><p>Define <code class="docutils literal notranslate"><span class="pre">df_sub</span></code> to be the sub-DataFrame containing all the rows for which the “pickup_zone” entry is missing.  Use the <code class="docutils literal notranslate"><span class="pre">isna</span></code> method.</p></li>
</ul>
<ul class="simple">
<li><p>What if you tried to check for equality with <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>?</p></li>
</ul>
</section>
<section id="time-to-work-on-worksheets-3-4">
<h2>Time to work on Worksheets 3-4<a class="headerlink" href="#time-to-work-on-worksheets-3-4" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>Hanson and I are here to help.</p></li>
<li><p>I have another class at 2pm, so if you have questions, ask me now rather than after class!</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Week2"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="Week2-Monday.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Week 2 Monday</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="Week2-Friday.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Week 2 Friday</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#announcements">Announcements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exploring-the-taxis-dataset">Exploring the taxis dataset</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-dates-in-pandas">Working with dates in pandas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-strings-in-pandas">Working with strings in pandas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#missing-values-in-pandas">Missing values in pandas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#time-to-work-on-worksheets-3-4">Time to work on Worksheets 3-4</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            <div class="bd-footer-content__inner">
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Christopher Davis
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div></div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=12da95d707ffb74b382d"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=12da95d707ffb74b382d"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>